<!DOCTYPE html>
<html class="" lang="en"><head>
    
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=7" />

    <link
    rel="icon"
    href='/favicon.png'
/>
<link
    rel="shortcut icon"
    href='/favicon.ico'
    type="image/x-icon"
/>
<link
    rel="apple-touch-icon"
    href='/apple-touch-icon.png'
/>

<title>
        
            Cloudflare Pages Errors With CORS  &ndash;
        
        LoopedNetwork
    </title>

    
    <link href="/symbols-nerd-font/symbols-nerd-font.css" rel="stylesheet" integrity="sha512-lydow8GLOLlYNOtHlksNCmGWWCBsbIEtikXpHzfWqx78HLlyQZHOzyLwPpKol4Th6aCwLUXOfODVYgwrd3nwKQ=="/>
    <link href="/jetbrains-mono/jetbrains-mono.css" rel="stylesheet" integrity="sha512-tJxlgL6v1Y7kFf+qB8SloaAMKnOAw6WouknxXtIjkBux9Y/9aX81EUWOJO8c/3l98DmjG8brr4to7zaez606Fg=="/>

    
    
    <link type="text/css" rel="stylesheet" href=https://looped.network/css/styles.abbd6311bb4b6ca58f8e7398140529245ae0f6428b759fcd830742eee2619eabb900ba9914a9affb82aa9a16a9b9ea727bb315315a976a0db0e7513a5f12c504.css integrity="sha512-q71jEbtLbKWPjnOYFAUpJFrg9kKLdZ/NgwdC7uJhnqu5ALqZFKmv&#43;4Kqmhapuepye7MVMVqXag2w51E6XxLFBA==" />
<meta name="author" content="LoopedNetwork" />

    
        <meta name="keywords" content='Cloudflare, Cloudflare Pages, CORS, Hugo' />
    
    
        <meta name="description" content=" my post regarding my return to Hugo yesterday, I noticed a potential issue with my new site. While testing it from the local Hugo development server everything looked great. After linking Cloudflare Pages with the repo and deploying it, though, things started to misbehave. Namely, the CSS and JavaScript weren&amp;rsquo;t being loaded, giving me an extremely ugly site with the .svg logo being the full width of the screen, a default white background, and black text with blue links." />
    

<meta property="og:site_name"
    content='LoopedNetwork' />

    <meta property="og:title" content="Cloudflare Pages Errors With CORS" />
    <meta property="og:type" content="article" />
    
    <meta
        property="article:author" content="LoopedNetwork" />
    <meta
        property="article:published_time"
        content='2023-04-05T19:59:14Z-0400' />
    
        
            <meta property="article:tag" content="Cloudflare" />
        
            <meta property="article:tag" content="Cloudflare Pages" />
        
            <meta property="article:tag" content="CORS" />
        
            <meta property="article:tag" content="Hugo" />
        
    
    <meta property="og:url" content="https://looped.network/posts/cloudflare-pages-cors/" />
    
    
    <meta property="og:image"
        content="https://looped.network/img/icon.svg" />
    
        <meta property="og:description" content="Shortly after making my post regarding my return to Hugo yesterday, I noticed a potential issue with my new site. While testing it from the local Hugo developme" />
    

<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:domain"
      content='looped.network'
/>
<meta property="twitter:url" content="https://looped.network/posts/cloudflare-pages-cors/" />


    <meta name="twitter:title" content="Cloudflare Pages Errors With CORS" />
    
    
    
    <meta name="twitter:image"
        content="https://looped.network/img/icon.svg" />
    
        <meta name="twitter:description" content="Shortly after making my post regarding my return to Hugo yesterday, I noticed a potential issue with my new site. While testing it from the local Hugo developme" />
    

<link rel="manifest" href="/manifest/index.json" />
</head>


<body>
        <div id="baseContainer"><header class="">
<div class="titleAndSearchContainer">
        <div id="titleContainer">
            
                <a class="unstyledLink" href="/">
                    <img src='/logo.svg' alt='Logo'/>
                </a>
            
            <div class="rightOfLogo">
                <div class="titleAndHamburger">
                    <h1>
                        <a class="unstyledLink" href="/">LoopedNetwork</a>
                        
                    </h1>
                    
                </div>
                <div id="wide_nav"><nav>
    
    <ul id="main-nav">
        <li><a href="/">Home</a></li>
        
            <li><a href="/posts">Posts</a></li>
        
        
        
        
        
        
            <li><a href="/about/">About</a></li>
        
        
            <li><a href="/tags">Tags</a></li>
        
        
    </ul>
</nav>
</div>
            </div>
        </div>
        <div class="search">
    <input id="searchbar" type="text" placeholder='Search' />
    <a class="nerdlink" onclick="newSearch();">&#xf002;</a>
</div>
<script>
    function newSearch() {
        let term = searchbar.value.trim();
        if (!term) return;
        location.href = `/search?q=${term}`;
    }
    searchbar.onkeyup = (ev) => {if (ev.keyCode == 13) newSearch()};
</script>

    </div>
    <div id="links">
        <a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="/index.xml">
    
    
        &#xf09e;
    
    <span>
        RSS
    </span>
</a>

        
        <a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://github.com/jfabry-noc">
    
    
        &#xf09b;
    
    <span>
        GitHub
    </span>
</a>
<a
    
        rel="me"
    
    target="_blank"
    class="nerdlink"
    href="https://social.sdf.org/@loopednetwork">
    
    
        <svg class='pseudofont' xmlns:svg='http://www.w3.org/2000/svg' width='16' height='16' viewbox='0 0 16 16'><path d='M 7.4779094,-1.598624e-6 C 5.5602384,0.0156984 3.7155894,0.2233384 2.6405814,0.7170384 c 0,0 -2.13206093,0.9537 -2.13206093,4.20766 0,0.74512 -0.01448,1.63603 0.0091,2.58084 0.07742,3.1821946 0.58336693,6.3183886 3.52553593,7.0971276 1.356568,0.359063 2.521335,0.434289 3.45936,0.382729 1.701085,-0.09431 2.6560206,-0.607063 2.6560206,-0.607063 l -0.05611,-1.234252 c 0,0 -1.2156316,0.383272 -2.5808476,0.33656 -1.352609,-0.04639 -2.780561,-0.145832 -2.999328,-1.80651 -0.0202,-0.145872 -0.03031,-0.301902 -0.03031,-0.465714 0,-10e-7 1.327834,0.324572 3.010574,0.40167 1.028943,0.0472 1.993827,-0.06028 2.9738766,-0.177218 1.879445,-0.224425 3.515901,-1.382448 3.721577,-2.4405646 0.32407,-1.666815 0.297376,-4.067605 0.297376,-4.067605 0,-3.25396 -2.131943,-4.20766 -2.131943,-4.20766 C 11.288476,0.2233384 9.4426784,0.0156784 7.5250084,-1.598624e-6 Z M 5.3076104,2.5424984 c 0.798781,0 1.403595,0.30701 1.803551,0.92113 l 0.388886,0.65181 0.388884,-0.65181 c 0.399875,-0.61412 1.00469,-0.92113 1.803551,-0.92113 0.6903266,0 1.2465526,0.24267 1.6713186,0.71609 0.411755,0.47342 0.61677,1.11337 0.61677,1.91862 v 3.939988 h -1.560986 v -3.824218 c 0,-0.80613 -0.339166,-1.21531 -1.0176126,-1.21531 -0.750129,0 -1.126049,0.48533 -1.126049,1.44509 v 2.09324 h -1.551753 v -2.09324 c 0,-0.95976 -0.376039,-1.44509 -1.126168,-1.44509 -0.678446,0 -1.017613,0.40918 -1.017613,1.21531 v 3.824218 h -1.560985 v -3.939988 c 0,-0.80525 0.205053,-1.4452 0.616889,-1.91862 0.424685,-0.47342 0.980911,-0.71609 1.671317,-0.71609 z' /></svg>
    
    <span>
        Mastodon
    </span>
</a>

    </div>
    

</header>
<div id="contentContainer">
                <div id="content">
                    <main>
<article class="card single">
    
        <h1>Cloudflare Pages Errors With CORS</h1>
    
    
        <p class="date">
            <span title='Date'> </span>
    2023-04-05

</p>
    
    
    
    
    <div><p>Shortly after making my post regarding my <a href="https://looped.network/posts/back-to-hugo/">return to Hugo</a> yesterday, I noticed a potential issue with my new site. While testing it from the local Hugo development server everything looked great. After linking Cloudflare Pages with the <a href="https://github.com/jfabry-noc/HugoLooped">repo</a> and deploying it, though, things started to misbehave. Namely, the CSS and JavaScript weren&rsquo;t being loaded, giving me an <em>extremely</em> ugly site with the <code>.svg</code> logo being the full width of the screen, a default white background, and black text with blue links. It had definite &ldquo;I don&rsquo;t know how to scale images while making a website in the 90&rsquo;s&rdquo; vibes.</p>
<p>Looking at the browser console, I was greeted with the following:</p>
<p><img src="/2023/hugo_sha.png" alt="Error in the Firefox development console saying &amp;lsquo;None of the sha256 hashes in the integrity attribute match the content of the subresource"></p>
<p>Looking at the <code>&lt;head&gt;</code> of my index file, I saw that the theme was providing the hashes of what the CSS and JavaScript should be. As there was a mismatch, that&rsquo;s why they weren&rsquo;t loading. Some quick searches gave me a hint with a <a href="https://community.cloudflare.com/t/cors-blocked-on-custom-domain-pages/417441">community post</a> with the same problem. It seemed that using functionality of Cloudflare to automatically minify content would naturally cause problems with this setup since the content of would be altered. In that case, having the hashes not match would be expected. I&rsquo;m sure I turned this feature on while playing around with a different site hosted at this same domain a long time ago and simply forgot about it. This happens because the settings for it are under the <strong>Website</strong> section of Cloudflare, not the <strong>Pages</strong> section.</p>
<p>I toggled the settings off in Cloudflare, let the change bake for a few minutes, and then kicked off a fresh deployment of the site. Unfortunately, the same issue persisted. I even tried removing the site entirely from Cloudflare Pages, re-linking to the repo, and doing a refresh deployment, but the same problem persisted.</p>
<p>Curious if this was still a Cloudflare issue or if there was a larger problem happening, I decided to try linking the repo to GitHub Pages. I added a quick <a href="https://github.com/jfabry-noc/HugoLooped/blob/main/.github/workflows/hugo.yml">GitHub Action</a> for building the site and tested my first deployment. Once my domain was added and DNS was happy, everything worked smoothly. GitHub Pages is where the site is still currently at the time of this posting.</p>
<p>My guess is that the minify settings in Cloudflare were still the culprit, and I was simply running into a caching issue, either on the Cloudflare side or in my local browsers with which I was testing. I&rsquo;d like to swap back to Cloudflare Pages at some point to test, but I also don&rsquo;t want to take my site down again while waiting for DNS to update. It may be easier when I get some spare time to simply make a copy of my own repository (since I can&rsquo;t fork it to the same account), change the base domain to what Cloudflare uses by default, and test with that. As it is, I&rsquo;m currently just happy to have everything sorted out.</p>
</div>
</article>

    <hr />
    <p class="articleTagsContainer">
        <span> </span>
        <strong>Tags:</strong>
        
            <a
                
                href="/tags/cloudflare">#Cloudflare</a>
        
            <a
                
                href="/tags/cloudflare-pages">#Cloudflare Pages</a>
        
            <a
                
                href="/tags/cors">#CORS</a>
        
            <a
                
                href="/tags/hugo">#Hugo</a>
        
    </p>






                    </main><footer>
    <hr />

<p><small>
        2023 &copy; Copyright 2023 - LoopedNetwork
    </small></p>
    <p><small>
        <a href='https://gitlab.com/gabmus/hugo-ficurinia'>Ficurinia theme</a> for <a href='https://gohugo.io'>Hugo</a> by <a href='https://gabmus.org'>Gabriele Musco</a>. Licensed under <a href='https://www.gnu.org/licenses/agpl-3.0.html'>GNU AGPLv3</a>.
    </small></p>
</footer>
</div>
            </div>
        </div>


</body>
</html>
