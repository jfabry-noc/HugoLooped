<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Compiling GSS-NTLMSSP For Alpine Linux :: LoopedNetwork</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="I recently found myself working on a project which required the GSS-NTLMSSP library. The application is going to be delivered via Kubernetes, so I needed to build a Docker image with this library. The project&amp;rsquo;s build instructions are pretty clear about what the dependencies are, but given that this was going to be a Docker image, I wanted to use Alpine Linux as the base image in order to keep the image size as small as possible." />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://looped.network/posts/gss-ntlmssp-alpine/" />






  
  
  
  
  
  <link rel="stylesheet" href="https://looped.network/styles.css">







  <link rel="shortcut icon" href="https://looped.network/favicon.ico">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Compiling GSS-NTLMSSP For Alpine Linux">
<meta property="og:description" content="I recently found myself working on a project which required the GSS-NTLMSSP library. The application is going to be delivered via Kubernetes, so I needed to build a Docker image with this library. The project&amp;rsquo;s build instructions are pretty clear about what the dependencies are, but given that this was going to be a Docker image, I wanted to use Alpine Linux as the base image in order to keep the image size as small as possible." />
<meta property="og:url" content="https://looped.network/posts/gss-ntlmssp-alpine/" />
<meta property="og:site_name" content="LoopedNetwork" />

  
    <meta property="og:image" content="https://looped.network/favicon.ico">
  

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2022-08-14 18:23:54 -0400 EDT" />












</head>
<body class="pink">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    LoopedNetwork
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://looped.network/posts/gss-ntlmssp-alpine/">Compiling GSS-NTLMSSP For Alpine Linux</a>
  </h1>
  <div class="post-meta">
    
      <time class="post-date">
        2022-08-14 ::
        
      </time>
    
    
    
      <span class="post-reading-time">:: 2 min read (370 words)</span>
    
  </div>

  
    <span class="post-tags">
      
      #<a href="https://looped.network/tags/gss-ntlmssp/">GSS-NTLMSSP</a>&nbsp;
      
      #<a href="https://looped.network/tags/ntlm/">NTLM</a>&nbsp;
      
      #<a href="https://looped.network/tags/alpine/">Alpine</a>&nbsp;
      
      #<a href="https://looped.network/tags/linux/">Linux</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p>I recently found myself working on a project which required the <a href="https://github.com/gssapi/gss-ntlmssp">GSS-NTLMSSP</a> library. The application is going to be delivered via Kubernetes, so I needed to build a Docker image with this library. The <a href="https://github.com/gssapi/gss-ntlmssp/blob/main/BUILD.txt">project&rsquo;s build instructions</a> are pretty clear about what the dependencies are, but given that this was going to be a Docker image, I wanted to use <a href="https://www.alpinelinux.org/">Alpine Linux</a> as the base image in order to keep the image size as small as possible. The problem with this is that Alpine is just different enough to require different dependencies, publish their <a href="https://pkgs.alpinelinux.org/packages">packages</a> under different names, etc.</p>
<p>I started off by just doing things manually where I fired up a local Docker container running the base <a href="https://hub.docker.com/_/alpine">Docker image</a> and then manually installing each package via <code>apk add {package_name}</code> to make troubleshooting easier. Once I had all of the packages from the aforementioned build documentation, I ran <code>./configure</code>, looked at the errors, figured out which package was missing, installed it, and tried again. After several iterations of this process, <code>./configure</code> executed successfully and it was time to attempt running <code>make</code>.</p>
<p><code>make</code> ran for a minute but then would error out with:</p>
<blockquote>
<p>undefined reference to &rsquo;libintl_dgettext'</p>
</blockquote>
<p>This seemed odd to me because while running <code>./configure</code> I had received an error that <code>msgfmt</code> couldn&rsquo;t be found, and I had installed <code>gettext-dev</code> in order to accommodate that. After some additional packages searches, I discovered the <code>musl-libintl</code> library is also available. I attempted to install <em>that</em> but received an error that it was attempting to modify a file controlled by the <code>gettext-dev</code> package. I uninstalled that via <code>apk del gettext-dev</code> and then ran into another error that&ndash;duh&ndash;<code>msgfmt</code> was now missing again. I handled that by just installing the vanilla <code>gettext</code> package, not the <code>-dev</code> version, and then <strong>finally</strong> everything compiled successfully.</p>
<p>The following is the full list of packages that I needed in order to get the build to succeed:</p>
<ul>
<li>autoconf</li>
<li>automake</li>
<li>build-base</li>
<li>docbook-xsl</li>
<li>doxygen</li>
<li>findutils</li>
<li>gettext</li>
<li>git</li>
<li>krb5-dev</li>
<li>libwbclient</li>
<li>libtool</li>
<li>libxml2</li>
<li>libxslt</li>
<li>libunistring-dev</li>
<li>m4</li>
<li>musl-libintl</li>
<li>pkgconfig</li>
<li>openssl-dev</li>
<li>samba-dev</li>
<li>zlib-dev</li>
</ul>
<p>Note that <code>git</code> is included just to clone the repo, and <code>build-base</code> is the meta package I used for compiling C software since just installing something like <code>gcc</code> will not include everything needed.</p>

      </div></div>

  
    
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="https://looped.network/posts/neovim-lsp/">
                <span class="button__icon">←</span>
                <span class="button__text">Real Time Error Checking and Code Completion With Neovim</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="https://looped.network/posts/powershell-import-classes-functions/">
                <span class="button__text">Importing Functions, Classes, and Methods From Other PowerShell Files</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2023 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
